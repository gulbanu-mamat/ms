# 登录系统使用说明

## 系统概述

这是一个基于C++的登录认证系统，集成了物流管理系统，支持用户管理、密码策略和多用户数据隔离。系统启动后直接显示登录界面，普通用户登录后直接进入仓库管理系统。

## 功能特性

### 1. 用户认证
- 用户名和密码存储在 `users.txt` 文件中
- 格式：`用户名;密码;状态`
- 支持多用户同时管理

### 2. 密码策略
- 密码长度：8-15位
- 必须包含字母和数字
- 不能与原密码相同
- 初始密码登录时强制修改

### 3. 管理员功能
- 注册新用户
- 重置用户密码（自动生成符合规则的随机密码）
- 查看所有用户
- 修改管理员密码

### 4. 用户数据隔离
- 每个用户都有独立的数据目录 `users/用户名/`
- 包含独立的：
  - orders.dat（订单数据）
  - vehicles.dat（车辆数据）
  - warehouses.dat（仓库数据）
  - goods.dat（货物数据）

## 编译和运行

### 编译
```bash
gcc -Wall -Wextra -std=c99 -o login_system main_login.c login_system.c
```

### 运行
```bash
./login_system
```

## 默认账户

- **管理员账户**
  - 用户名: `admin`
  - 密码: `Admin123456`

## 使用流程

### 1. 管理员登录
1. 使用管理员账户登录
2. 选择功能：
   - 注册新用户
   - 重置用户密码
   - 查看所有用户
   - 修改管理员密码
   - 退出登录

### 2. 用户登录
1. 使用普通用户账户登录
2. 如果是初始密码，系统会强制修改密码
3. 登录成功后直接进入仓库管理系统
4. 退出仓库系统后，可以：
   - 修改密码
   - 退出系统

### 3. 密码修改规则
- 输入当前密码验证
- 新密码必须8-15位，包含字母和数字
- 新密码不能与原密码相同
- 需要确认新密码

## 文件结构

```
program3/
├── login_system.exe        # 可执行文件
├── login_system.h          # 头文件
├── login_system.c          # 主要功能实现
├── main_login.c           # 主程序
├── users.txt              # 用户数据文件
├── users/                 # 用户数据目录
│   ├── admin/            # 管理员数据
│   └── 用户名/           # 各用户数据
│       ├── orders.dat
│       ├── vehicles.dat
│       ├── warehouses.dat
│       └── goods.dat
└── LOGIN_README.md        # 本说明文档
```

## 滚动功能说明

### 管理员界面滚动
在 "View All Users" 功能中，如果用户数量较多，系统会自动启用滚动功能：

- **滚动指示器**：显示当前查看的用户范围和总用户数
- **导航控制**：
  - `↑` 向上滚动
  - `↓` 向下滚动  
  - `ESC` 或 `Q` 返回管理员菜单
  - `Enter` 或 `Space` 返回管理员菜单

### 滚动功能特性
- 自动检测内容是否超出屏幕
- 动态计算可见行数
- 实时显示当前位置指示器
- 边界检测防止越界滚动

## 注意事项

1. **安全性**：
   - 密码以明文存储，生产环境建议加密
   - 管理员密码不能被重置

2. **用户管理**：
   - 用户名不能重复
   - 删除用户需要手动编辑 `users.txt` 文件

3. **数据隔离**：
   - 每个用户的数据完全独立
   - 用户目录会自动创建

4. **兼容性**：
   - 支持Windows和Linux系统
   - 需要C编译器支持C99标准

5. **界面操作**：
   - 管理员用户列表支持滚动查看
   - 支持键盘导航和快捷键操作

## 故障排除

### 界面优化更新
**最新修改**: 
- **快速启动**: 移除启动动画，直接显示登录界面，提升启动速度
- **管理员界面**: 移除了不必要的"Return to Main System"选项
- **用户界面**: 普通用户登录后直接进入仓库管理系统，退出后显示简化菜单
- **菜单优化**: 将"Change Password"移到"Exit System"上方，提升用户体验

### 滚动功能问题
**已修复**: Admin Panel菜单和用户界面的键盘导航问题
- 所有菜单界面现已启用完整的键盘输入支持
- 修复了上下箭头键在菜单中的导航功能
- 改进了"查看所有用户"界面的滚动响应性

### 编译和运行问题
- 如果遇到链接错误，确保安装了ncurses库
- 确保终端窗口足够大（建议至少80x24）
- 如果键盘导航不工作，请使用支持完整键盘输入的终端

## 扩展建议

1. 集成现有的物流管理系统
2. 添加密码加密功能
3. 增加用户权限管理
4. 添加日志记录功能
5. 支持用户删除功能 