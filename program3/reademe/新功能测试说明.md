# 🔐 认证系统新功能测试说明

## ✨ 新增功能

### 1. 管理员删除用户功能
- 管理员可以删除普通用户（不能删除admin自己）
- 删除用户时会同时删除用户的数据目录
- 提供确认对话框防止误删

### 2. 密码错误三次冻结功能
- 用户输错密码会记录失败次数
- 连续3次输错密码后账户冻结30秒
- 冻结期间显示剩余时间
- 成功登录后重置失败次数

## 🧪 测试步骤

### 测试1: 管理员删除用户功能
1. 使用管理员账户登录 (`admin` / `Admin123456`)
2. 在管理员菜单中选择 "3. Delete User"
3. 选择要删除的用户（gulbanu 或 Alice）
4. 确认删除操作
5. 验证用户是否从用户列表中移除
6. 检查用户目录是否被删除

### 测试2: 密码错误冻结功能
1. 使用 gulbanu 账户进行测试
2. 第一次输入错误密码，观察提示信息和剩余尝试次数
3. 第二次输入错误密码，再次观察提示
4. 第三次输入错误密码，账户应该被冻结30秒
5. 在冻结期间尝试登录，应该显示剩余冻结时间
6. 等待30秒后，重新尝试登录，应该可以正常输入

### 测试2A: 错误次数重置功能
1. 使用 Alice 账户进行测试
2. 第一次输入错误密码（剩余尝试：2次）
3. 第二次输入错误密码（剩余尝试：1次）
4. 第三次输入**正确**密码 → 应该成功登录且错误次数清零
5. 退出后重新登录测试，验证错误次数已重置

### 测试3: 正常功能验证
1. 使用正确密码登录各个账户
2. 验证失败次数在成功登录后被重置
3. 确保管理员功能（注册用户、重置密码、查看用户）正常工作
4. 确保普通用户功能（修改密码、访问仓库系统）正常工作

## 📊 测试用户账户

| 用户名 | 密码 | 类型 | 说明 |
|--------|------|------|------|
| admin | Admin123456 | 管理员 | 默认管理员账户 |
| gulbanu | gul20041130 | 普通用户 | 已有完整数据 |
| Alice | alice123456 | 普通用户 | 已有完整数据 |

## 🔍 验证要点

### 删除用户功能
- [ ] 可以成功删除普通用户
- [ ] 无法删除admin账户（不显示在删除列表中）
- [ ] 删除确认对话框正常工作
- [ ] 用户目录被正确删除
- [ ] 用户从users.txt文件中移除

### 密码冻结功能
- [ ] 失败次数正确计算（1/3, 2/3）
- [ ] 第三次失败后账户冻结
- [ ] 冻结期间显示剩余时间
- [ ] 30秒后自动解冻
- [ ] 成功登录后重置失败次数

### 兼容性
- [ ] 现有功能不受影响
- [ ] 数据文件格式兼容
- [ ] 界面显示正常
- [ ] 错误处理正确

## 🚨 注意事项

1. **备份数据**: 测试前请备份users.txt和用户数据目录
2. **管理员安全**: 确保至少保留一个管理员账户
3. **时间测试**: 冻结时间测试需要实际等待30秒
4. **数据一致性**: 删除用户后检查数据文件的一致性

## 📋 问题报告模板

如果发现问题，请记录以下信息：
- 问题描述
- 重现步骤
- 预期结果
- 实际结果
- 错误信息（如有）
- 测试环境 